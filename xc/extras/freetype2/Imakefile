#ifndef SharedFreetypeRev
#define SharedFreetypeRev 6.0
#endif

FREETYPELIBSRC=$(TOP)/extras/freetype2
SharedLibReferences(FREETYPE,freetype,$(FREETYPELIBSRC),SOFREETYPEREV,SharedFreetypeRev)

#define DoNormalLib	NO
#define DoSharedLib	YES
#define DoExtraLib	NO
#define DoDebugLib	NO
#define DoProfileLib	NO
#define HasSharedData	YES
#define LibName		freetype
#define SoRev		SOFREETYPEREV
#define IncSubdir	freetype
#define IncSubSubdir	freetype2

#include <Threads.tmpl>

INCLUDES=-Iinclude -Isrc

BASE      = src/base

SRCS_BASE = ftsystem.c ftinit.c ftdebug.c ftbase.c ftglyph.c ftbbox.c ftmm.c
OBJS_BASE = ftsystem.o ftinit.o ftdebug.o ftbase.o ftglyph.o ftbbox.o ftmm.o

SRCS_AUTOHINT = autohint.c
OBJS_AUTOHINT = autohint.o

SRCS_SFNT     = sfnt.c
OBJS_SFNT     = sfnt.o

SRCS_CFF      = cff.c
OBJS_CFF      = cff.o

SRCS_PSNAMES  = psnames.c
OBJS_PSNAMES  = psnames.o

SRCS_PSAUX    = psaux.c
OBJS_PSAUX    = psaux.o

SRCS_TRUETYPE = truetype.c
OBJS_TRUETYPE = truetype.o

SRCS_TYPE1    = type1.c
OBJS_TYPE1    = type1.o

SRCS_CID      = type1cid.c
OBJS_CID      = type1cid.o

SRCS_RASTER   = raster.c
OBJS_RASTER   = raster.o

SRCS_SMOOTH   = smooth.c
OBJS_SMOOTH   = smooth.o

SRCS_WINFONTS = winfnt.c
OBJS_WINFONTS = winfnt.o


SRCS = $(SRCS_BASE) $(SRCS_AUTOHINT) $(SRCS_SFNT) $(SRCS_CFF) \
	$(SRCS_PSNAMES) $(SRCS_PSAUX) $(SRCS_TRUETYPE) $(SRCS_TYPE1) \
	$(SRCS_CID) $(SRCS_RASTER) $(SRCS_SMOOTH) $(SRCS_WINFONTS) 

OBJS = $(OBJS_BASE) $(OBJS_AUTOHINT) $(OBJS_SFNT) $(OBJS_CFF) \
	$(OBJS_PSNAMES) $(OBJS_PSAUX) $(OBJS_TRUETYPE) $(OBJS_TYPE1) \
	$(OBJS_CID) $(OBJS_RASTER) $(OBJS_SMOOTH) $(OBJS_WINFONTS)

#include <Library.tmpl>

#if DoSharedLib && SharedDataSeparation
SpecialCObjectRule(sharedlib,NullParameter,$(SHLIBDEF))
#endif

#if 0
MANSUFFIX = $(LIBMANSUFFIX)
InstallManPage(Freetype,$(LIBMANDIR))
#endif

LinkSourceFile(ftsystem.c,$(BASE))
LinkSourceFile(ftinit.c,$(BASE))
LinkSourceFile(ftdebug.c,$(BASE))
LinkSourceFile(ftbase.c,$(BASE))
LinkSourceFile(ftglyph.c,$(BASE))
LinkSourceFile(ftbbox.c,$(BASE))
LinkSourceFile(ftmm.c,$(BASE))
LinkSourceFile(autohint.c,src/autohint)
LinkSourceFile(sfnt.c,src/sfnt)
LinkSourceFile(cff.c,src/cff)
LinkSourceFile(psnames.c,src/psnames)
LinkSourceFile(psaux.c,src/psaux)
LinkSourceFile(truetype.c,src/truetype)
LinkSourceFile(type1.c,src/type1)
LinkSourceFile(type1cid.c,src/cid)
LinkSourceFile(raster.c,src/raster)
LinkSourceFile(smooth.c,src/smooth)
LinkSourceFile(winfnt.c,src/winfonts)

DependTarget()

depend:: include/freetype2

include/freetype2:
	cd include && ln -s . freetype2

