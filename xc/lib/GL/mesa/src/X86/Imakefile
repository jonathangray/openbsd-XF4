XCOMM $XFree86: xc/lib/GL/mesa/src/X86/Imakefile,v 1.18 2001/05/02 15:06:03 dawes Exp $

/*
 * Only need SharedLib build unless OSMesa lib is built, or driver is built
 * in to libGL
 */
#if BuildXF86DRI && !GlxUseSGISI && \
	(GlxUseBuiltInDRIDriver || \
	 !GlxBuiltInMesa || !defined(GlxDriverUsesMesa))
#define DoNormalLib (NormalLibGlx || SharedLibGlxWithoutPIC)
#define DoSharedLib (SharedLibGlx && !SharedLibGlxWithoutPIC)
#define DoExtraLib SharedLibGlx
#define DoDebugLib DebugLibGlx
#define DoProfileLib ProfileLibGlx
#else
#define DoNormalLib SharedLibGlxWithoutPIC
#define DoSharedLib !SharedLibGlxWithoutPIC
#define DoExtraLib NO
#define DoDebugLib NO
#define DoProfileLib NO
#endif

#if Malloc0ReturnsNull
ALLOC_DEFINES = -DMALLOC_0_RETURNS_NULL
#endif

#define MesaX86BuildDir /**/
#define NeedToLinkMesaSrc
#include "Imakefile.inc"

      DEFINES = $(ALLOC_DEFINES) GlxDefines $(MESA_ASM_DEFINES)
     INCLUDES = -I$(INCLUDESRC) -I$(EXTINCSRC) -I$(MESASRCDIR)/src \
		-I$(MESASRCDIR)/src/X86

         SRCS = $(MESA_ASM_SRCS)
         OBJS = $(MESA_ASM_OBJS)

#include <Library.tmpl>

LibraryObjectRule()

STD_CPP_DEFINES = StandardDefines $(PROJECT_DEFINES)

SubdirLibraryRule($(OBJS))
NormalLintTarget($(SRCS))

ObjectFromAsmSource(common_x86_asm, NullParameter)

ObjectFromAsmSource(x86_cliptest, NullParameter)
ObjectFromAsmSource(x86_vertex, NullParameter)
ObjectFromAsmSource(x86_xform_masked2, NullParameter)
ObjectFromAsmSource(x86_xform_masked3, NullParameter)
ObjectFromAsmSource(x86_xform_masked4, NullParameter)
ObjectFromAsmSource(x86_xform_raw2, NullParameter)
ObjectFromAsmSource(x86_xform_raw3, NullParameter)
ObjectFromAsmSource(x86_xform_raw4, NullParameter)

#if MesaUseMMX
ObjectFromAsmSource(mmx_blend, NullParameter)
#endif

#if MesaUse3DNow
ObjectFromAsmSource(3dnow_norm_raw, NullParameter)
ObjectFromAsmSource(3dnow_vertex, NullParameter)
ObjectFromAsmSource(3dnow_xform_masked1, NullParameter)
ObjectFromAsmSource(3dnow_xform_masked2, NullParameter)
ObjectFromAsmSource(3dnow_xform_masked3, NullParameter)
ObjectFromAsmSource(3dnow_xform_masked4, NullParameter)
ObjectFromAsmSource(3dnow_xform_raw1, NullParameter)
ObjectFromAsmSource(3dnow_xform_raw2, NullParameter)
ObjectFromAsmSource(3dnow_xform_raw3, NullParameter)
ObjectFromAsmSource(3dnow_xform_raw4, NullParameter)
#endif

#if MesaUseKatmai
ObjectFromAsmSource(katmai_norm_raw, NullParameter)
ObjectFromAsmSource(katmai_vertex, NullParameter)
ObjectFromAsmSource(katmai_xform_masked1, NullParameter)
ObjectFromAsmSource(katmai_xform_masked2, NullParameter)
ObjectFromAsmSource(katmai_xform_masked3, NullParameter)
ObjectFromAsmSource(katmai_xform_masked4, NullParameter)
ObjectFromAsmSource(katmai_xform_raw1, NullParameter)
ObjectFromAsmSource(katmai_xform_raw2, NullParameter)
ObjectFromAsmSource(katmai_xform_raw3, NullParameter)
ObjectFromAsmSource(katmai_xform_raw4, NullParameter)
#endif

DependTarget()
