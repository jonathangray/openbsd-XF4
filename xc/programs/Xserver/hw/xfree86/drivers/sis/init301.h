/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/sis/init301.h,v 1.4 2000/12/02 01:16:17 dawes Exp $ */

#include "initdef.h"

USHORT VBInfo,SetFlag,RVBHCFACT,RVBHCMAX,VGAVT,VGAHT,VT,HT,VGAVDE,VGAHDE;
USHORT VDE,HDE,RVBHRS,NewFlickerMode,RY1COE,RY2COE,RY3COE,RY4COE;                
USHORT LCDResInfo,LCDTypeInfo,LCDInfo,VCLKLen;
USHORT LCDHDES,LCDVDES;
USHORT DDC_Port;
USHORT DDC_Index;
USHORT DDC_DataShift;
USHORT DDC_DeviceAddr;
USHORT DDC_Flag;
USHORT DDC_ReadAddr;
USHORT DDC_Buffer;

USHORT StResInfo[5][2]={{640,400},{640,350},{720,400},{720,350},{640,480}};
USHORT ModeResInfo[15][4]={{320,200,8,8},{320,240,8,8},{320,400,8,8},
                       {400,300,8,8},{512,384,8,8},{640,400,8,16},
                       {640,480,8,16},{800,600,8,16},{1024,768,8,16},
                       {1280,1024,8,16},{1600,1200,8,16},{1920,1440,8,16},
                       {720,480,8,16},{720,576,8,16},{1280,960,8,16}};

USHORT HiTVExtTiming[61]={0x32,0x65,0x2C,0x5F,0x08,0x31,0x3A,0x64,
                          0x28,0x02,0x01,0x3D,0x06,0x3E,0x35,0x6D,
                          0x06,0x14,0x3E,0x35,0x6D,0x00,0xC5,0x3F,
                          0x64,0x90,0x33,0x8C,0x18,0x36,0x3E,0x13,
                          0x2A,0xDE,0x2A,0x44,0x40,0x2A,0x44,0x40,
                          0x8E,0x8E,0x82,0x07,0x0B,
                          0x92,0x0F,0x40,0x60,0x80,0x14,0x90,0x8C,
                          0x60,0x14,0x3D,0x63,0x4F,
                          0x027,0xFFFC,0x6A};

USHORT HiTVSt1Timing[61]={0x32,0x65,0x2C,0x5F,0x08,0x31,0x3A,0x65,
                          0x28,0x02,0x01,0x3D,0x06,0x3E,0x35,0x6D,
                          0x06,0x14,0x3E,0x35,0x6D,0x00,0xC5,0x3F,
                          0x65,0x90,0x7B,0xA8,0x03,0xF0,0x87,0x03,
                          0x11,0x15,0x11,0xCF,0x10,0x11,0xCF,0x10,
                          0x35,0x35,0x3B,0x69,0x1D,
                          0x92,0x0F,0x40,0x60,0x80,0x14,0x90,0x8C,
                          0x60,0x04,0x86,0xAF,0x5D,
                          0xE,0xFFFC,0x2D};

USHORT HiTVSt2Timing[61]={0x32,0x65,0x2C,0x5F,0x08,0x31,0x3A,0x64,
                          0x28,0x02,0x01,0x3D,0x06,0x3E,0x35,0x6D,
                          0x06,0x14,0x3E,0x35,0x6D,0x00,0xC5,0x3F,
                          0x64,0x90,0x33,0x8C,0x18,0x36,0x3E,0x13,
                          0x2A,0xDE,0x2A,0x44,0x40,0x2A,0x44,0x40,
                          0x8E,0x8E,0x82,0x07,0x0B,
                          0x92,0x0F,0x40,0x60,0x80,0x14,0x90,0x8C,
                          0x60,0x14,0x3D,0x63,0x4F,
                          0x27,0xFFFC,0x6A};

USHORT HiTVTextTiming[61]={0x32,0x65,0x2C,0x5F,0x08,0x31,0x3A,0x65,
                           0x28,0x02,0x01,0x3D,0x06,0x3E,0x35,0x6D,
                           0x06,0x14,0x3E,0x35,0x6D,0x00,0xC5,0x3F,
                           0x65,0x90,0xE7,0xBC,0x03,0x0C,0x97,0x03,
                           0x14,0x78,0x14,0x08,0x20,0x14,0x08,0x20,
                           0xC8,0xC8,0x3B,0xD2,0x26,
                           0x92,0x0F,0x40,0x60,0x80,0x14,0x90,0x8C,
                           0x60,0x04,0x96,0x72,0x5C,
                           0x11,0xFFFC,0x32};

USHORT HiTVGroup3Data[63]={0x00,0x1A,0x22,0x63,0x62,0x22,0x08,0x5F,
                           0x05,0x21,0xB2,0xB2,0x55,0x77,0x2A,0xA6,
                           0x25,0x2F,0x47,0xFA,0xC8,0xFF,0x8E,0x20,
                           0x8C,0x6E,0x60,0x2E,0x58,0x48,0x72,0x44,
                           0x56,0x36,0x4F,0x6E,0x3F,0x80,0x00,0x80,
                           0x4F,0x7F,0x03,0xA8,0x7D,0x20,0x1A,0xA9,
                           0x14,0x05,0x03,0x7E,0x64,0x31,0x14,0x75,
                           0x18,0x05,0x18,0x05,0x4C,0xA8,0x01};

USHORT HiTVGroup3Simu[63]={0x00,0x1A,0x22,0x63,0x62,0x22,0x08,0x95,
                           0xDB,0x20,0xB8,0xB8,0x55,0x47,0x2A,0xA6,
                           0x25,0x2F,0x47,0xFA,0xC8,0xFF,0x8E,0x20,
                           0x8C,0x6E,0x60,0x15,0x26,0xD3,0xE4,0x11,
                           0x56,0x36,0x4F,0x6E,0x3F,0x80,0x00,0x80,
                           0x67,0x36,0x01,0x47,0x0E,0x10,0xBE,0xB4,
                           0x01,0x05,0x03,0x7E,0x65,0x31,0x14,0x75,
                           0x18,0x05,0x18,0x05,0x4C,0xA8,0x01};

USHORT HiTVGroup3Text[63]={0x00,0x1A,0x22,0x63,0x62,0x22,0x08,0xA7,
                           0xF5,0x20,0xCE,0xCE,0x55,0x47,0x2A,0xA6,
                           0x25,0x2F,0x47,0xFA,0xC8,0xFF,0x8E,0x20,
                           0x8C,0x6E,0x60,0x18,0x2C,0x0C,0x20,0x22,
                           0x56,0x36,0x4F,0x6E,0x3F,0x80,0x00,0x80,
                           0x93,0x3C,0x01,0x50,0x2F,0x10,0xF4,0xCA,
                           0x01,0x05,0x03,0x7E,0x65,0x31,0x14,0x75,
                           0x18,0x05,0x18,0x05,0x4C,0xA8,0x01};


USHORT NTSCTiming[61]={0x017,0x01D,0x003,0x009,0x005,0x006,0x00C,0x00C,
                    0x094,0x049,0x001,0x00A,0x006,0x00D,0x004,0x00A,
                    0x006,0x014,0x00D,0x004,0x00A,0x000,0x085,0x01B,
                    0x00C,0x050,0x000,0x099,0x000,0x0EC,0x04A,0x017,
                    0x088,0x000,0x04B,0x000,0x000,0x0E2,0x000,0x002,
                    0x003,0x00A,0x065,0x09D,0x008,
                    0x092,0x08F,0x040,0x060,0x080,0x014,0x090,0x08C,
                    0x060,0x014,0x050,0x000,0x040,
                    0x00044,0x002DB,0x0003B};    /* Ajust xxx */

USHORT PALTiming[61]={ 0x019,0x052,0x035,0x06E,0x004,0x038,0x03D,0x070,
                    0x094,0x049,0x001,0x012,0x006,0x03E,0x035,0x06D,
                    0x006,0x014,0x03E,0x035,0x06D,0x000,0x045,0x02B,
                    0x070,0x050,0x000,0x097,0x000,0x0D7,0x05D,0x017,
                    0x088,0x000,0x045,0x000,0x000,0x0E8,0x000,0x002,
                    0x00D,0x000,0x068,0x0B0,0x00B,
                    0x092,0x08F,0x040,0x060,0x080,0x014,0x090,0x08C,
                    0x060,0x014,0x063,0x000,0x040,
                    0x0003E,0x002E1,0x00028};    /* Ajust xxx */

USHORT NTSCGroup3Data[63]= {0x000,0x014,0x015,0x025,0x055,0x015,0x00B,0x089,
                         0x0D7,0x040,0x0B0,0x0B0,0x0FF,0x0C4,0x045,0x0A6,
                         0x025,0x02F,0x067,0x0F6,0x0BF,0x0FF,0x08E,0x020,
                         0x08C,0x0DA,0x060,0x092,0x0C8,0x055,0x08B,0x000,
                         0x051,0x004,0x018,0x00A,0x0F8,0x087,0x000,0x080,
                         0x03B,0x03B,0x000,0x0F0,0x0F0,0x000,0x0F0,0x0F0,
                         0x000,0x051,0x00F,0x00F,0x008,0x00F,0x008,0x06F,
                         0x018,0x005,0x005,0x005,0x04C,0x0AA,0x001};

USHORT PALGroup3Data[63]={0x000,0x01A,0x022,0x063,0x062,0x022,0x008,0x085,
                       0x0C3,0x020,0x0A4,0x0A4,0x055,0x047,0x02A,0x0A6,
                       0x025,0x02F,0x047,0x0FA,0x0C8,0x0FF,0x08E,0x020,
                       0x08C,0x0DC,0x060,0x092,0x0C8,0x04F,0x085,0x000,
                       0x056,0x036,0x04F,0x06E,0x0FE,0x083,0x054,0x081,
                       0x030,0x030,0x000,0x0F3,0x0F3,0x000,0x0A2,0x0A2,
                       0x000,0x048,0x0FE,0x07E,0x008,0x040,0x008,0x091,
                       0x018,0x005,0x018,0x005,0x04C,0x0A8,0x001};
USHORT Part1[41]={0x30, 0x16, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x00, 
                  0x3f, 0x30, 0x8c, 0xbc, 0x22, 0x1c, 0x05, 0xdf,
                  0xf3, 0x16, 0x0a, 0x20, 0x89, 0x93, 0x00, 0x80,
                  0x14, 0xf7, 0x58, 0x00, 0x00, 0x18, 0x28, 0x32,
                  0x15, 0xff, 0xa0, 0x00, 0x01, 0x03, 0x2c, 0x11, 
                  0x92};

VOID SetDefCRT2ExtRegs(USHORT BaseAddr);
BOOLEAN SetCRT2Group(USHORT BaseAddr,ULONG ROMAddr,USHORT ModeNo, ScrnInfoPtr pScrn);
USHORT GetRatePtrCRT2(ULONG ROMAddr, USHORT ModeNo);
BOOLEAN AjustCRT2Rate(ULONG ROMAddr);
VOID SaveCRT2Info(USHORT ModeNo);
VOID DisableLockRegs(VOID);
VOID DisableCRT2(VOID);
VOID DisableBridge(USHORT  BaseAddr);
VOID GetCRT2Data(ULONG ROMAddr,USHORT ModeNo);
VOID GetCRT2DataLVDS(ULONG ROMAddr,USHORT ModeNo);
VOID GetCRT2Data301(ULONG ROMAddr,USHORT ModeNo);
VOID GetResInfo(ULONG ROMAddr,USHORT ModeNo);
VOID GetRAMDAC2DATA(ULONG ROMAddr,USHORT ModeNo);
VOID GetCRT2Ptr(ULONG ROMAddr,USHORT ModeNo);
VOID UnLockCRT2(USHORT BaseAddr);
VOID SetCRT2ModeRegs(USHORT BaseAddr,USHORT ModeNo);
VOID SetGroup1(USHORT BaseAddr,ULONG ROMAddr,USHORT ModeNo,ScrnInfoPtr pScrn);
VOID SetGroup1_LVDS(USHORT  BaseAddr,ULONG ROMAddr,USHORT ModeNo,ScrnInfoPtr pScrn);
VOID SetGroup1301(USHORT BaseAddr,ULONG ROMAddr,USHORT ModeNo,ScrnInfoPtr pScrn);
VOID GetLVDSDesData(ULONG ROMAddr,USHORT ModeNo);
VOID SetCRT2Offset(USHORT Part1Port,ULONG ROMAddr);
USHORT GetOffset(ULONG ROMAddr);
USHORT GetColorDepth(ULONG ROMAddr);
VOID SetCRT2FIFO(USHORT Part1Port,ULONG ROMAddr,USHORT ModeNo,ScrnInfoPtr pScrn);
USHORT GetVCLK(ULONG ROMAddr,USHORT ModeNo);
USHORT GetVCLKPtr(ULONG ROMAddr,USHORT ModeNo);
USHORT GetColorTh(ULONG ROMAddr);
USHORT GetMCLK(ULONG ROMAddr);
USHORT GetMCLKPtr(ULONG ROMAddr);
USHORT GetDRAMType(ULONG ROMAddr);
USHORT CalcDelayVB(VOID);
USHORT GetVCLK2Ptr(ULONG ROMAddr,USHORT ModeNo);
VOID SetCRT2Sync(USHORT BaseAddr,ULONG ROMAddr,USHORT ModeNo);
VOID GetCRT1Ptr(ULONG ROMAddr);
VOID SetRegANDOR(USHORT Port,USHORT Index,USHORT DataAND,USHORT DataOR);
USHORT GetVGAHT2(VOID);
VOID SetGroup2(USHORT  BaseAddr,ULONG ROMAddr, USHORT ModeNo);
VOID SetGroup3(USHORT  BaseAddr,ULONG ROMAddr);
VOID SetGroup4(USHORT  BaseAddr,ULONG ROMAddr,USHORT ModeNo);
VOID SetCRT2VCLK(USHORT BaseAddr,ULONG ROMAddr,USHORT ModeNo);
VOID SetGroup5(USHORT  BaseAddr,ULONG ROMAddr);
VOID EnableCRT2(VOID);
VOID LoadDAC2(ULONG ROMAddr,USHORT Part5Port);
VOID WriteDAC2(USHORT Pdata,USHORT dl, USHORT ah, USHORT al, USHORT dh);
VOID LockCRT2(USHORT BaseAddr);
VOID SetLockRegs(VOID);
VOID EnableBridge(USHORT BaseAddr);
VOID GetVBInfo(USHORT BaseAddr,ULONG ROMAddr);
BOOLEAN BridgeIsEnable(USHORT BaseAddr);
BOOLEAN BridgeInSlave(VOID);
BOOLEAN GetLCDResInfo(ULONG ROMAddr,USHORT P3d4);
VOID PresetScratchregister(USHORT P3d4);
BOOLEAN GetLCDDDCInfo(ScrnInfoPtr pScrn);
VOID SetTVSystem();
VOID LongWait();
USHORT GetQueueConfig();
VOID VBLongWait();
USHORT GetVCLKLen(ULONG ROMAddr);
BOOLEAN WaitVBRetrace(USHORT  BaseAddr);
VOID ModCRT1CRTC(ULONG ROMAddr,USHORT ModeNo);
VOID SetCRT2ECLK(ULONG ROMAddr, USHORT ModeNo);
USHORT GetLVDSDesPtr(ULONG ROMAddr,USHORT ModeNo);
BOOLEAN GetLVDSCRT1Ptr(ULONG ROMAddr,USHORT ModeNo);
VOID SetGroup1_301(USHORT BaseAddr,ULONG ROMAddr,USHORT ModeNo,ScrnInfoPtr pScrn);
VOID SetGroup1_LVDS(USHORT BaseAddr,ULONG ROMAddr,USHORT ModeNo,ScrnInfoPtr pScrn);
VOID SetTPData();
BOOLEAN GetPanelID();
BOOLEAN GetLVDSCRT1Ptr(ULONG ROMAddr,USHORT ModeNo);
VOID SetCHTVReg(ULONG ROMAddr,USHORT ModeNo);	
VOID SetCHTVRegANDOR(USHORT tempax,USHORT tempbh);
VOID GetCHTVRegPtr(ULONG ROMAddr,USHORT ModeNo);
VOID SetCH7005(USHORT tempax);
USHORT GetCH7005(USHORT tempax);
VOID SetSwitchDDC2(VOID);
VOID SetStart(VOID);
VOID SetStop(VOID);
VOID DDC2Delay(VOID);
VOID SetSCLKLow(VOID);
VOID SetSCLKHigh(VOID);
USHORT ReadDDC2Data(USHORT tempax);
USHORT WriteDDC2Data(USHORT tempax);
USHORT CheckACK(VOID);

extern USHORT MDA_DAC[];
extern USHORT CGA_DAC[];
extern USHORT EGA_DAC[];
extern USHORT VGA_DAC[];

extern USHORT   P3c4,P3d4,P3c0,P3ce,P3c2,P3ca,P3c6,P3c7,P3c8,P3c9,P3da;
extern USHORT   flag_clearbuffer; /* 0:no clear frame buffer 1:clear frame buffer */
extern int      RAMType;
extern int      ModeIDOffset,StandTable,CRT1Table,ScreenOffset,VCLKData,MCLKData, ECLKData;
extern int      REFIndex,ModeType;
extern USHORT   VBInfo,LCDResInfo,LCDTypeInfo,LCDInfo;
extern USHORT   IF_DEF_LVDS;
extern USHORT	IF_DEF_HiVision;
extern USHORT   IF_DEF_CH7005;

extern VOID     SetReg1(USHORT, USHORT, USHORT);
extern VOID     SetReg3(USHORT, USHORT);
extern USHORT   GetReg1(USHORT, USHORT);
extern USHORT   GetReg2(USHORT);
extern BOOLEAN  SearchModeID(ULONG, USHORT);
extern BOOLEAN  GetRatePtr(ULONG, USHORT);
extern VOID SetReg4(USHORT, ULONG);
extern ULONG GetReg3(USHORT);
