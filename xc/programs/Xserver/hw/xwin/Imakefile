XCOMM $XConsortium: Imakefile /main/10 1996/12/02 10:20:33 lehors $
XCOMM $XFree86: xc/programs/Xserver/hw/xwin/Imakefile,v 1.6 2001/04/25 19:44:02 tsi Exp $

#include <Server.tmpl>

#if HasShm
SHMDEF = -DHAS_SHM
#endif

MMAPDEF = -DHAS_MMAP

SRCSA =	InitInput.c \
	InitOutput.c \
	stubs.c \
	wingc.c \
	winpolyline.c \
	winfillsp.c \
	wingetsp.c \
	winsetsp.c \
	winwindow.c \
	winpntwin.c \
	winpixmap.c \
	winfont.c \
	wincmap.c \
	winclip.c \
	winallpriv.c \
	winscrinit.c \
	winmisc.c \
	winblock.c \
	winwakeup.c \
	wincursor.c \
	winwndproc.c \
	winshadgdi.c \
	winshaddd.c \
	winshadddnl.c \
	winpfbdd.c \
	winkeybd.c \
	winmouse.c

OBJSA =	InitInput.o \
	InitOutput.o \
	stubs.o \
	wingc.o \
	winpolyline.o \
	winfillsp.o \
	wingetsp.o \
	winsetsp.o \
	winwindow.o \
	winpntwin.o \
	winpixmap.o \
	winfont.o \
	wincmap.o \
	winclip.o \
	winallpriv.o \
	winscrinit.o \
	winmisc.o \
	winblock.o \
	winwakeup.o \
	wincursor.o \
	winwndproc.o \
	winshadgdi.o \
	winshaddd.o \
	winshadddnl.o \
	winpfbdd.o \
	winkeybd.o \
	winmouse.o

INCLUDES = -I. -I$(XBUILDINCDIR) -I$(FONTINCSRC) -I$(SERVERSRC)/render \
	   -I$(SERVERSRC)/fb -I$(SERVERSRC)/mi \
	   -I$(SERVERSRC)/include -I$(SERVERSRC)/os  \
           -I$(EXTINCSRC) -I$(XINCLUDESRC) -I$(SERVERSRC)/miext/shadow

DEFINES = $(OS_DEFINES) $(SHMDEF) $(MMAPDEF) -UXFree86LOADER -UXF86DRI

#if BuildDPMS
SRCSB =	dpmsstubs.c
OBJSB =	dpmsstubs.o
#endif

SRCS =	$(SRCSA) $(SRCSB) $(SRCSC)
OBJS =	$(OBJSA) $(OBJSB) $(OBJSC)

LinkSourceFile(stubs.c,$(SERVERSRC)/Xi)
SpecialCObjectRule(stubs,$(ICONFIGFILES),$(EXT_DEFINES))

#if BuildDPMS
LinkSourceFile(dpmsstubs.c,$(SERVERSRC)/Xext)
SpecialCObjectRule(dpmsstubs,$(ICONFIGFILES),$(EXT_DEFINES))
#endif

NormalLibraryObjectRule()
NormalLibraryTarget(Xwin,$(OBJS))

DependTarget()
